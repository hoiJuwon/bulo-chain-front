(this["webpackJsonpbulo-chain-front"]=this["webpackJsonpbulo-chain-front"]||[]).push([[0],{304:function(e,t){},306:function(e,t){},308:function(e,t){},312:function(e,t){},339:function(e,t){},341:function(e,t){},351:function(e,t){},353:function(e,t){},363:function(e,t){},365:function(e,t){},482:function(e,t){},484:function(e,t){},491:function(e,t){},492:function(e,t){},605:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(59),s=n.n(i),o=n(29),u=n(17),c=n.n(u),d=n(30),l=n(12),p=n(15),y=n(52),b=n(26),m=n(25),v=n(116),f=n(118),h=n.n(f),j=new(n(271).a)({supportedChainIds:[1,3,4,5,42]}),T=n(642),x=n(1);var O=function(){var e=Object(v.b)(),t=e.active,n=e.account,a=(e.library,e.connector,e.activate),r=e.deactivate;function i(){return(i=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a(j);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function s(){return(s=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r()}catch(t){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.jsxs)("div",{className:"Connect",children:[" ",Object(x.jsx)(T.a,{variant:"outlined",onClick:function(){return i.apply(this,arguments)},className:"py-2 mt-20 mb-4 text-lg font-bold text-white rounded-lg w-56 bg-blue-600 hover:bg-blue-800",children:"Connect to MetaMask"}),Object(x.jsx)(T.a,{variant:"outlined",onClick:function(){return s.apply(this,arguments)},className:"py-2 mt-20 mb-4 text-lg font-bold text-white rounded-lg w-56 bg-blue-600 hover:bg-blue-800",children:"Disconnect"}),t?Object(x.jsxs)("span",{children:["Connected with ",Object(x.jsx)("b",{children:n})]}):Object(x.jsx)("span",{children:"Not connected"})]})},g=n(5),w=n(60),k=n(21),I=n(159),C=n.n(I);function M(e){return D.apply(this,arguments)}function D(){return(D=Object(d.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:null,error:null},e.prev=1,e.next=4,t;case 4:n.data=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n.error=e.t0;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function S(e,t,n,a,r){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(c.a.mark((function e(t,n,a,r,i){var s,o,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://ipfs.infura.io:5001/api/v0/add?stream-channels=true",s={name:t,note:n,birth:a,x:r,y:i},o=JSON.stringify(s),(u=new FormData).append("data",o),d={headers:{"content-type":"multipart/form-data"}},e.next=8,M(C.a.post("https://ipfs.infura.io:5001/api/v0/add?stream-channels=true",u,d));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(c.a.mark((function e(t){var n,a,r,i,s,o,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://ipfs.io/ipfs/".concat(t),{headers:{"content-type":"multipart/form-data"}},e.prev=2,e.next=5,M(C.a.get(n));case 5:return a=e.sent,r=a.data.data,i=r.name,s=r.note,o=r.birth,u=r.x,d=r.y,e.abrupt("return",[i,s,o,u,d]);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",["not found"]);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var B=function(e){var t=e.onLocationChange,n=e.graves,a=e.x,r=e.y;function i(e,n,a){return a?Object(x.jsx)(T.a,{className:"grave",onClick:function(){return t(e,n,a)},children:"\ud83e\udea6"},"{c.tokenId}"):Object(x.jsx)(T.a,{className:"grass",onClick:function(){return t(e,n,null)},children:"\ud83c\udf31"})}return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{children:Object(x.jsx)("table",{children:Object(x.jsx)("tbody",{children:n.map((function(e,t){return Object(x.jsx)("tr",{children:e.map((function(e,n){return Object(x.jsx)("td",{style:parseInt(a,10)===t&&parseInt(r,10)===n?{border:"solid black"}:{border:"solid white"},children:i(t,n,e)},n)}))},t)}))})})})})};function F(e,t,n){return"object"===typeof n[e][t]}var V=n(644),_=n(641);var E=function(e){var t=e.registerGrave,n=e.graves,r=e.donateTo,i=e.graveToOwner,s=e.vaultInfoOf,u=Object(a.useState)({name:"",note:"",birth:"",x:"",y:"",amount:0}),l=Object(k.a)(u,2),p=l[0],y=l[1],b=Object(a.useState)(null),m=Object(k.a)(b,2),v=m[0],f=m[1],h=Object(a.useState)(null),j=Object(k.a)(h,2),O=j[0],I=j[1],C=p.name,M=p.note,D=p.birth,A=p.x,G=p.y,N=p.amount,E=function(e){var t=e.target,n=t.value,a=t.name;y(Object(w.a)(Object(w.a)({},p),{},Object(g.a)({},a,n)))},L=function(){var e=Object(d.a)(c.a.mark((function e(t,n,a){var r,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}return console.log(a.data),r=a.tokenId,e.next=5,i(r);case 5:return u=e.sent,console.log(u),f([].concat(Object(o.a)(a.data),[u])),e.next=10,s(u);case 10:d=e.sent,I(d),e.next=15;break;case 14:f([null,null,null,t,n]);case 15:y(Object(w.a)(Object(w.a)({},p),{},{x:t,y:n}));case 16:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("donate ".concat(v[5]," ").concat(p.amount)),r(v[5],p.amount);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(c.a.mark((function e(){var a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C&&M&&D){e.next=2;break}return e.abrupt("return",alert("\ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694"));case 2:if(A&&G){e.next=4;break}return e.abrupt("return",alert("\ubb18\uc9c0\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694"));case 4:if(!F(A,G,n)){e.next=6;break}return e.abrupt("return",alert("\ud574\ub2f9 \uc704\uce58\uc5d0 \uc774\ubbf8 \ubb18\uc9c0\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4."));case 6:return e.next=8,S(C,M,D,A,G);case 8:a=e.sent,r=a.data,i=r.data.Hash,console.log(i),alert(i),t(i);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsx)(B,{onLocationChange:L,graves:n,x:v&&v[3],y:v&&v[4]}),Object(x.jsx)("div",{children:v&&v[0]?Object(x.jsxs)(V.a,{variant:"outlined",children:[Object(x.jsx)("div",{children:"\ud83e\udea6 Grave"}),"name : ",v[0]," ",Object(x.jsx)("br",{}),"message: ",v[1]," ",Object(x.jsx)("br",{}),"birth: ",v[2]," ",Object(x.jsx)("br",{}),Object(x.jsx)("div",{children:"\ud83d\udcb0 Vault"}),"address: ",v[5],Object(x.jsxs)("div",{children:["isActive : ",!0===(null===O||void 0===O?void 0:O.isActive)?"true":"false"]}),Object(x.jsxs)("div",{children:["balance : ",null===O||void 0===O?void 0:O.balanceOf]}),Object(x.jsxs)("div",{children:["tokenId : ",null===O||void 0===O?void 0:O.tokenId]}),Object(x.jsxs)("div",{children:["donate target : ",null===O||void 0===O?void 0:O.donateTarget]}),Object(x.jsxs)("div",{children:["lastDonationBlockNumber : ",null===O||void 0===O?void 0:O.lastDonationBlockNumber]}),Object(x.jsxs)("div",{children:["contributors : ",null===O||void 0===O?void 0:O.contributors]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(_.a,{name:"amount",value:N,onChange:E,placeholder:"amount"}),Object(x.jsx)(T.a,{variant:"outlined",onClick:J,children:"donate to this vault"})]})]}):Object(x.jsxs)(V.a,{variant:"outlined",children:[Object(x.jsx)("div",{children:"\ud83c\udf31 Empty"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(_.a,{name:"name",value:C,onChange:E,placeholder:"name"}),Object(x.jsx)(_.a,{name:"note",value:M,onChange:E,placeholder:"note"}),Object(x.jsx)(_.a,{name:"birth",value:D,onChange:E,placeholder:"birth"}),Object(x.jsxs)(T.a,{variant:"outlined",onClick:P,children:["post"," "]})]})]})})]})};var L=function(e){var t=e.info,n=e.vault,r=e.myAddress,i=e.createVault,s=e.donateTo,o=e.updateDonateTarget,u=Object(a.useState)({donateTarget:"",amount:0,tokenId:t[5]}),l=Object(k.a)(u,2),p=l[0],y=l[1],b=p.donateTarget,m=p.amount,v=function(e){var t=e.target,n=t.value,a=t.name;console.log(n,a),y(Object(w.a)(Object(w.a)({},p),{},Object(g.a)({},a,n))),console.log(p)},f=function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("donate ".concat(p.donateTarget," ").concat(p.amount)),s(p.donateTarget,p.amount);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("create vault ".concat(t[5]," ").concat(r,"->").concat(p.donateTarget)),i(t[5],r,p.donateTarget);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("update ".concat(r," vault to ").concat(p.donateTarget)),o(r,p.donateTarget);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log(t),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(V.a,{variant:"outlined",children:[Object(x.jsx)("div",{children:Object(x.jsx)("strong",{children:"My Grave"})}),"name : ",t[0]," ",Object(x.jsx)("br",{}),"message: ",t[1]," ",Object(x.jsx)("br",{}),"birth: ",t[2]," ",Object(x.jsx)("br",{}),"tokenId: ",t[5]," ",Object(x.jsx)("br",{}),"your address: ",r]}),Object(x.jsxs)("div",{children:[Object(x.jsxs)(V.a,{variant:"outlined",children:[Object(x.jsx)("div",{children:Object(x.jsx)("strong",{children:" My Vault"})}),Object(x.jsxs)("div",{children:["isActive : ",!0===(null===n||void 0===n?void 0:n.isActive)?"true":"false"]}),Object(x.jsxs)("div",{children:["balance : ",null===n||void 0===n?void 0:n.balanceOf]}),Object(x.jsxs)("div",{children:["tokenId : ",null===n||void 0===n?void 0:n.tokenId]}),Object(x.jsxs)("div",{children:["donate target : ",null===n||void 0===n?void 0:n.donateTarget]}),Object(x.jsxs)("div",{children:["lastDonationBlockNumber : ",null===n||void 0===n?void 0:n.lastDonationBlockNumber]}),Object(x.jsxs)("div",{children:["contributors : ",null===n||void 0===n?void 0:n.contributors]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(_.a,{name:"donateTarget",value:b,onChange:v,placeholder:"donateTarget"}),Object(x.jsx)(T.a,{variant:"outlined",onClick:h,children:"create vault"}),Object(x.jsx)(T.a,{variant:"outlined",onClick:j,children:"change donateTarget"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(_.a,{name:"amount",value:m,onChange:v,placeholder:"amount"}),Object(x.jsx)(T.a,{variant:"outlined",onClick:f,children:"add ETH to this vault"})]})]}),Object(x.jsx)(x.Fragment,{})]})]})},J=[{inputs:[{internalType:"string",name:"initURI",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"_uri",type:"string"},{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"NewGrave",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"Graves",outputs:[{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"tokenId",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"getMyTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"graveCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"graveInfoOf",outputs:[{internalType:"string",name:"uri",type:"string"},{internalType:"uint256",name:"tokenId",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"graveToOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_uri",type:"string"}],name:"registerGrave",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],P=[{inputs:[{internalType:"contract BuloNFTInterface",name:"buloNft_",type:"address"},{internalType:"uint256",name:"donationBlockGap_",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"vaultOwner",type:"address"},{indexed:!1,internalType:"address",name:"contributor",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"NewDonatation",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"vaultOwner",type:"address"},{indexed:!1,internalType:"address",name:"oldDonateTarget",type:"address"},{indexed:!1,internalType:"address",name:"newDonateTarget",type:"address"}],name:"NewDonateTarget",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"vaultOwner",type:"address"},{indexed:!1,internalType:"address",name:"donateTarget",type:"address"}],name:"NewVault",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"src",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"buloNft",outputs:[{internalType:"contract BuloNFTInterface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId_",type:"uint256"},{internalType:"address",name:"vaultOwner_",type:"address"},{internalType:"address",name:"donateTarget_",type:"address"}],name:"createVault",outputs:[{components:[{internalType:"bool",name:"isActive",type:"bool"},{internalType:"uint256",name:"balanceOf",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"lastDonationBlockNumber",type:"uint256"},{internalType:"address",name:"donateTarget",type:"address"},{internalType:"address[]",name:"contributors",type:"address[]"}],internalType:"struct VaultStorage.VaultInfo",name:"",type:"tuple"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"vaultOwner_",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"donateTo",outputs:[{components:[{internalType:"bool",name:"isActive",type:"bool"},{internalType:"uint256",name:"balanceOf",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"lastDonationBlockNumber",type:"uint256"},{internalType:"address",name:"donateTarget",type:"address"},{internalType:"address[]",name:"contributors",type:"address[]"}],internalType:"struct VaultStorage.VaultInfo",name:"",type:"tuple"}],stateMutability:"payable",type:"function"},{inputs:[],name:"donationBlockGap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"vaultOwner_",type:"address"}],name:"executeDonation",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"totalAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"vaultOwner_",type:"address"},{internalType:"address",name:"donateTarget_",type:"address"}],name:"updateDonateTarget",outputs:[{components:[{internalType:"bool",name:"isActive",type:"bool"},{internalType:"uint256",name:"balanceOf",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"lastDonationBlockNumber",type:"uint256"},{internalType:"address",name:"donateTarget",type:"address"},{internalType:"address[]",name:"contributors",type:"address[]"}],internalType:"struct VaultStorage.VaultInfo",name:"",type:"tuple"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"vaultInfoOf",outputs:[{internalType:"bool",name:"isActive",type:"bool"},{internalType:"uint256",name:"balanceOf",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"lastDonationBlockNumber",type:"uint256"},{internalType:"address",name:"donateTarget",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}];function H(e){return new h.a(e)}var R=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={account:"",graveCount:0,Graves:[],GraveMap:Array.from(Array(10),(function(){return new Array(10).fill(0)})),loading:!0,myGrave:[]},a.registerGrave=a.registerGrave.bind(Object(y.a)(a)),a.createVault=a.createVault.bind(Object(y.a)(a)),a.updateDonateTarget=a.updateDonateTarget.bind(Object(y.a)(a)),a.donateTo=a.donateTo.bind(Object(y.a)(a)),a.graveToOwner=a.graveToOwner.bind(Object(y.a)(a)),a.vaultInfoOf=a.vaultInfoOf.bind(Object(y.a)(a)),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadBlockchainData();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadBlockchainData",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,n,a,r,i,s,u,d,l,p,y,b,m,v,f,j,T,x,O,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a(h.a.givenProvider||"http://localhost:8545"),e.next=3,t.eth.net.getNetworkType();case 3:return n=e.sent,console.log("network:",n),e.next=7,t.eth.getAccounts();case 7:return a=e.sent,this.setState({account:a[0]}),r=new t.eth.Contract(J,"0xF59c5b62F1B40c8c1083C8088E5dB9C4aF9FB3b0"),this.setState({bulo:r}),e.next=13,r.methods.graveCount().call();case 13:i=e.sent,this.setState({graveCount:i}),s=Array.from(Array(11),(function(){return new Array(11).fill(0)})),u=0;case 17:if(!(u<i)){e.next=32;break}return e.next=20,r.methods.Graves(u).call();case 20:return d=e.sent,l=d.uri,p=d.tokenId,console.log(l,p),e.next=25,G(l);case 25:y=e.sent,b=[y[3],y[4]],v=b[1],void 0!==(m=b[0])&&void 0!==v&&(s[parseInt(m,10)][parseInt(v,10)]={tokenId:p,uri:l,data:y}),this.setState({Graves:[].concat(Object(o.a)(this.state.Graves),[{tokenId:p,uri:l,data:y}])});case 29:u++,e.next=17;break;case 32:return this.setState({GraveMap:s}),e.next=35,r.methods.graveInfoOf(a[0]).call();case 35:return f=e.sent,j=f.uri,T=f.tokenId,e.next=40,G(j);case 40:return x=e.sent,console.log(x),console.log(T),this.setState({myGrave:[].concat(Object(o.a)(x),[T])}),O=new t.eth.Contract(P,"0x4E862beA9282b962163564a8DBcA638601CFC929"),this.setState({vault:O}),console.log("this.state.vault : ",O.methods),e.next=49,this.vaultInfoOf(a[0]);case 49:null==(g=e.sent)?console.log("empty vault"):(console.log(g),this.setState({myVault:g}));case 51:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"registerGrave",value:function(e){var t=this;this.setState({loading:!0}),this.state.bulo.methods.registerGrave(e).send({from:this.state.account}).once("receipt",(function(e){t.setState({loading:!1})}))}},{key:"createVault",value:function(e,t,n){var a=this;console.log(e,t,n),this.setState({loading:!0}),this.state.vault.methods.createVault(e,t,n).send({from:this.state.account}).once("receipt",(function(e){a.setState({loading:!1})}))}},{key:"updateDonateTarget",value:function(e,t){var n=this;this.setState({loading:!0}),this.state.vault.methods.updateDonateTarget(e,t).send({from:this.state.account}).once("receipt",(function(e){n.setState({loading:!1})}))}},{key:"donateTo",value:function(e,t){var n=this;this.setState({loading:!0}),this.state.vault.methods.donateTo(e,t).send({from:this.state.account}).once("receipt",(function(e){n.setState({loading:!1})}))}},{key:"graveToOwner",value:function(){var e=Object(d.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.bulo.methods.graveToOwner(t).call();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"vaultInfoOf",value:function(){var e=Object(d.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.vault.methods.vaultInfoOf(t).call();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsxs)(v.a,{getLibrary:H,style:{display:"flex"},children:[Object(x.jsxs)("div",{style:{float:"left"},children:[Object(x.jsx)(O,{}),Object(x.jsxs)("p",{style:{margin:"30px"},children:[this.state.graveCount," people didn't die. Click \ud83c\udf31 to make your grave."]}),Object(x.jsx)(E,{registerGrave:this.registerGrave,graves:this.state.GraveMap,donateTo:this.donateTo,graveToOwner:this.graveToOwner,vaultInfoOf:this.vaultInfoOf})]}),Object(x.jsx)("div",{style:{float:"left"},children:Object(x.jsx)(L,{info:this.state.myGrave,vault:this.state.myVault,myAddress:this.state.account,createVault:this.createVault,updateDonateTarget:this.updateDonateTarget,donateTo:this.donateTo})})]})}}]),n}(a.Component),U=R,q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,646)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(U,{})}),document.getElementById("root")),q()}},[[605,1,2]]]);
//# sourceMappingURL=main.fcad010c.chunk.js.map